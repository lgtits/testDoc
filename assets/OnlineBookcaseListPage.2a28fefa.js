import{d as g,r as u,l as b,m as B,o as a,e as c,g as e,q as w,w as F,F as $,aH as h,n as x,x as f,t as _,f as I,_ as y,aI as L,aJ as A,p as D}from"./index.8bd4b53a.js";import{D as N}from"./Dialog.53413c55.js";import{N as S}from"./Notify.05a600e1.js";import{C as v}from"./OnlineChatbotServices.9c72c985.js";const O=s=>(L("data-v-460e1fc7"),s=s(),A(),s),V={class:"bookcase"},E={class:"bookcase__title flex justify-between"},P=O(()=>e("img",{src:"/images/icons/delete.svg",alt:""},null,-1)),j=[P],q={class:"bookcase__date"},H=g({__name:"BookcaseCard",props:{bookcase:{type:Object,required:!0}},emits:["deleteBookcase"],setup(s,{emit:l}){const t=s,d=l,o=()=>{d("deleteBookcase",t.bookcase)},n=u(!0),r=u(),i=u(!1);return b(()=>{r.value.clientHeight>60&&(i.value=!0,n.value=!1)}),(p,m)=>{const C=B("router-link");return a(),c("div",V,[e("div",E,[w(C,{to:`/${p.$i18n.locale}/bookcase/${t.bookcase.id}`,class:"cursor-pointer"},{default:F(()=>[f(_(t.bookcase.title),1)]),_:1},8,["to"]),e("div",{class:"delete cursor-pointer",onClick:o},j)]),e("div",{class:x(["bookcase__document-list",{folded:!n.value}]),ref_key:"documentList",ref:r},[(a(!0),c($,null,h(t.bookcase.document_list,k=>(a(),c("span",{key:k.data_key},_(k.name),1))),128))],2),i.value?(a(),c("div",{key:0,class:"bookcase__show-more cursor-pointer",onClick:m[0]||(m[0]=k=>n.value=!n.value)},[f(" ....."),e("span",null,_(n.value?p.$t("$i18n_showLess_$i18n"):p.$t("$i18n_showMore_$i18n")),1)])):I("",!0),e("div",q,_(s.bookcase.updated_at),1)])}}});var M=y(H,[["__scopeId","data-v-460e1fc7"]]);const z={class:"bookcase-page"},J={class:"bookcase-page__content"},T={class:"bookcase-page__content__title text-secondary-900"},G={class:"bookcase-page__content__bookcase-list column"},K=g({__name:"OnlineBookcaseListPage",setup(s){const l=u(),t=async()=>{console.log("page init");const o=await v.getConversations();l.value=o.result.groups},d=async o=>{N.confirm({title:`\u522A\u9664\u66F8\u6AC3(${o.title})\uFF1F`,message:"\u522A\u9664\u5F8C\u7121\u6CD5\u5FA9\u539F\u3002",onOk:async()=>{await v.deleteConversation(o.id),S.error("\u5DF2\u522A\u9664"),t()}})};return b(async()=>{await v.initAppClient(),t()}),(o,n)=>{const r=M;return a(),c("div",z,[e("div",J,[e("div",T,_(o.$t("$i18n_bookcase_$i18n")),1),e("div",G,[(a(!0),c($,null,h(l.value,i=>(a(),D(r,{key:i.id,bookcase:i,onDeleteBookcase:d},null,8,["bookcase"]))),128))])])])}}});var X=y(K,[["__scopeId","data-v-3c352790"]]);export{X as default};
