import{d as h,o as l,e as u,F as v,aH as C,g,t as d,_ as y,i as w,n as S,f as D,a as b,ab as a,M as o,A as M,aF as N,aG as $}from"./index.36d38d9d.js";import{F as A}from"./Format.45ca4c10.js";import{C as x}from"./index.8fac4eb5.js";const B={class:"chatbot-options row"},O=["onClick"],R={class:"title"},L={class:"description"},j=h({__name:"ChatbotOptionsBlock",props:{options:{type:Array,required:!0}},emits:["submitOption"],setup(t,{emit:e}){const s=t,n=e,r=m=>{n("submitOption",m)};return(m,f)=>(l(),u("div",B,[(l(!0),u(v,null,C(s.options,p=>(l(),u("div",{class:"option cursor-pointer",key:p.description,onClick:J=>r(p.prompt)},[g("div",R,d(p.title),1),g("div",L,d(p.description),1)],8,O))),128))]))}});var K=y(j,[["__scopeId","data-v-0cd9cf84"]]);const k=h({__name:"MessageCardNew",props:{message:{type:String,default:null},role:{type:String,required:!0},selectedMessage:{type:Boolean,required:!0},messageId:{type:String,required:!0}},setup(t){const e=t,s=w(()=>{if(e.role==="user"){const r=e.message?.replace(/'/g,'"');return JSON.parse(r)[0]}else return A.removeChatbotResponseId(e.message)});return(n,r)=>e.message?(l(),u("div",{key:0,class:S(["message",{"user-message":e.role==="user","chatbot-message":e.role==="bot","selected-message":e.selectedMessage,"d-none":e.role==="id"}])},d(s.value)+" ",3)):D("",!0)}});var X=y(k,[["__scopeId","data-v-68c16e94"]]);const c=b.BUILD_ENABLE_CHATBOT_DUMMY_DATA_MODE,i=window.location.origin,_=b.BUILD_CHATBOT_API_DOMAIN_STAGING,G=async()=>(console.log("connect to : ",_),await x.connect(_)),I=async()=>c?await a.get(`${i}/dummyData/chatbot/chatbotGetHistoryListSample.json`):await a.get("groups"),E=async t=>c?await a.get(`${i}/dummyData/chatbot/chatbotDeleteHistorySample.json`):await a.del(`groups/${t}`),H=async(t,e)=>(console.log("patch bookcase: ",t,e),c?await a.get(`${i}/dummyData/chatbot/chatbotPatchHistorySample.json`):await a.patch(`groups/${t}`,e)),T=async(t,e)=>{if(c){const s=await a.get(`${i}/dummyData/chatbot/chatbotGetHistorySampleWithReference.json`);return e!=="b1"?s:{result:{page_title:"No history",history_messages:[]}}}else return(await t.predict("/get_history_messages",["docRL"])).data[0]},z=async(t,e)=>{if(c){const s=e==="zh"?"Zh":e==="ja"?"Ja":"En";return await a.get(`${i}/dummyData/chatbot/chatbotGetRecommendSample${s}.json`)}else return(await t.predict("/recommend_prompts",["docRL",e])).data[0]},U=async(t,e,s,n)=>{try{if(console.log("send message: ",[s.message,e,n]),c){const r=await t.predict("/messages",[[s.message,"docRLtest, docRL",n],s.history,2048,.7,.95,null]);return console.log("response: ",r),r.data[0]}else return(await a.get(`${i}/dummyData/chatbot/chatbotGetResponseSample.json`)).data[0]}catch(r){throw console.error("Error message:",r),r}},F=async t=>c?await a.get(`${i}/dummyData/chatbot/chatbotGetDirectoriesSample.json`):await a.get(`chatbot_directories/${t}`),q=t=>t.map(s=>({...s,nodes:s.nodes.map(n=>({...n,selected:!1}))})),P=async t=>{console.log("setChatbotScope: ",t)},Q=async t=>c?await a.get(`${i}/dummyData/chatbot/chatbotGetReferencesSample.json`):await a.get(`references/${t}`);var ee={initAppClient:G,getConversations:I,deleteConversation:E,patchConversation:H,getHistoryMessages:T,getRecommendPrompts:z,postMessage:U,getDirectories:F,processDirectories:q,setChatbotScope:P,getReferences:Q};const W=[o("circle",{cx:"15",cy:"15",r:"15"},[o("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),o("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[o("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),o("circle",{cx:"105",cy:"15",r:"15"},[o("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var te=M({name:"QSpinnerDots",props:N,setup(t){const{cSize:e,classes:s}=$(t);return()=>o("svg",{class:s.value,fill:"currentColor",width:e.value,height:e.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},W)}}),se=[{value:"en-US",label:"en-US"},{value:"zh-TW",label:"zh-TW"},{value:"zh-CN",label:"zh-CN"}];export{ee as C,te as Q,K as _,X as a,se as p};
